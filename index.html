<!doctype html>
<html lang="en-CA">
  <head>
    <meta charset="utf-8" />
    <meta
      name="description"
      content="Easily share local dev links across different domains and ports"
    />
    <meta name="author" content="jkoop &lt;https://github.com/jkoop&gt;" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, minimum-scale=1"
    />

    <title>Locaite.net</title>

    <script>
      const hostname = location.hostname.toLowerCase().split(".");
      const prefix = hostname.slice(0, -2).join(".");
      const goto = decodeURIComponent(
        Object.fromEntries(
          document.cookie.split("; ").map((c) => c.split("=")),
        )[prefix] ?? "",
      );
      const path = location.pathname;

      if (hostname.length == 2 && path != "/") {
        location.pathname = "/";
      }

      if (prefix == "static") {
        location.href = "//" + hostname.slice(-2).join(".");
      }

      if (prefix.length > 0 && goto != "") {
        location.href = goto + location.href.slice(location.origin.length + 1);
      }
    </script>

    <link rel="preconnect" href="https://static.locaite.net" />
    <link rel="preconnect" href="https://raw.githubusercontent.com" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <link
      rel="icon"
      href="https://raw.githubusercontent.com/Creators-of-Create/Create/d66170c8fed5d02ad46f44fd0e66685be88a3170/src/main/resources/assets/create/textures/item/polished_rose_quartz.png?_=copyright_2019_simibubi_mit_license"
    />

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Noto+Sans&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://static.locaite.net/style.min.css?v=STYLE_HASH"
    />
  </head>
  <body>
    <div id="bg"></div>
    <div id="body">
      <noscript class="card" style="display: block"
        >JavaScript is required</noscript
      >

      <div class="card main">
        <details open>
          <summary><h2 style="display: inline">Locaite.net</h2></summary>

          <h3>Seamlessly share local dev links</h3>
          <p>
            Locaite.net is a tool designed for web developers to facilitate
            sharing links to pages on each other's local development
            environments, even when they use different local domains and ports.
            This is achieved by replacing the domain name and port of a local
            address with a custom prefix followed by ".locaite.net". The chosen
            prefix should be concise and representative of the project name.
          </p>

          <p>
            When another developer receives such a link and clicks on it, they
            are redirected to the corresponding page on their own local
            development site, assuming they have pre-configured Locaite.net
            appropriately. The configuration process is a one-time setup, and
            <span id="privacy">no data is stored by Locaite.net</span>, ensuring
            privacy and security in the development workflow.
          </p>

          <p>
            This system streamlines collaboration among developers by providing
            a consistent method for accessing local resources without the need
            for manual adjustments to domain names and ports.
          </p>
        </details>

        <h3>Convert link</h3>
        <div class="locaite-link">
          <small class="nowrap"
            ><label for="localLink">Local link:</label></small
          >
          <input
            style="flex-grow: 1"
            id="localLink"
            type="url"
            placeholder="http://localhost:8080/path/to/thing?query=something#and-a-fragment"
            oninput="fromLocalLink(this)"
            onkeydown="copyDefaultLocaiteLink(event)"
          />
        </div>
        <div id="locaiteLinks"></div>

        <h3>
          Your prefixes
          <button type="button" onclick="clearPrefixes()">Clear all</button>
        </h3>
        <table>
          <thead>
            <tr>
              <th>Prefix</th>
              <th>Target</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="prefixes"></tbody>
        </table>

        <form id="savePrefixForm" onsubmit="savePrefix(event)"></form>
      </div>

      <form class="card redirect" onsubmit="save(event)">
        <a href="https://locaite.net">‚Üê Home</a>

        <h2>Not configured</h2>
        <p>
          It looks like you haven't configured the prefix "<code
            id="prefix"
          ></code
          >" yet.<br />
          Where do you want this link to redirect to for this web browser?
        </p>
        <p class="nowrap">
          <input id="goto" type="text" autofocus /><span id="path"></span>
        </p>
        <p style="margin-bottom: 4px">
          <button>Save and continue</button>
        </p>
      </form>

      <address>
        <span
          >Locaite &copy; 2024
          <a target="_blank" href="https://github.com/jkoop/locaite.net"
            >jkoop</a
          ></span
        >
        <a href="https://locaite.net/#privacy">Privacy</a>
      </address>
    </div>

    <script src="https://static.locaite.net/script.min.js?v=SCRIPT_HASH"></script>
  </body>
</html>
